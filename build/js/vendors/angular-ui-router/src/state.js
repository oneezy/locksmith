function $StateProvider(r,e){function t(r){return 0===r.indexOf(".")||0===r.indexOf("^")}function n(r,e){if(!r)return void 0;var n=isString(r),a=n?r:r.name,i=t(a);if(i){if(!e)throw new Error("No reference point given for path '"+a+"'");for(var o=a.split("."),s=0,l=o.length,u=e;l>s;s++)if(""!==o[s]||0!==s){if("^"!==o[s])break;if(!u.parent)throw new Error("Path '"+a+"' not valid for state '"+e.name+"'");u=u.parent}else u=e;o=o.slice(s).join("."),a=u.name+(u.name&&o?".":"")+o}var f=p[a];return!f||!n&&(n||f!==r&&f.self!==r)?void 0:f}function a(r,e){h[r]||(h[r]=[]),h[r].push(e)}function i(e){e=inherit(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var t=e.name;if(!isString(t)||t.indexOf("@")>=0)throw new Error("State must have a valid name");if(p.hasOwnProperty(t))throw new Error("State '"+t+"'' is already defined");var n=-1!==t.indexOf(".")?t.substring(0,t.lastIndexOf(".")):isString(e.parent)?e.parent:"";if(n&&!p[n])return a(n,e.self);for(var o in $)isFunction($[o])&&(e[o]=$[o](e,$.$delegates[o]));if(p[t]=e,!e[m]&&e.url&&r.when(e.url,["$match","$stateParams",function(r,t){d.$current.navigable==e&&equalForKeys(r,t)||d.transitionTo(e,r,{location:!1})}]),h[t])for(var s=0;s<h[t].length;s++)i(h[t][s]);return e}function o(r){return r.indexOf("*")>-1}function s(r){var e=r.split("."),t=d.$current.name.split(".");if("**"===e[0]&&(t=t.slice(t.indexOf(e[1])),t.unshift("**")),"**"===e[e.length-1]&&(t.splice(t.indexOf(e[e.length-2])+1,Number.MAX_VALUE),t.push("**")),e.length!=t.length)return!1;for(var n=0,a=e.length;a>n;n++)"*"===e[n]&&(t[n]="*");return t.join("")===e.join("")}function l(r,e){return isString(r)&&!isDefined(e)?$[r]:isFunction(e)&&isString(r)?($[r]&&!$.$delegates[r]&&($.$delegates[r]=$[r]),$[r]=e,this):this}function u(r,e){return isObject(r)?e=r:e.name=r,i(e),this}function f(r,e,t,a,i,l,u){function f(t,n,a,i){var o=r.$broadcast("$stateNotFound",t,n,a);if(o.defaultPrevented)return u.update(),w;if(!o.retry)return null;if(i.$retry)return u.update(),b;var s=d.transition=e.when(o.retry);return s.then(function(){return s!==d.transition?$:(t.options.$retry=!0,d.transitionTo(t.to,t.toParams,t.options))},function(){return w}),u.update(),s}function h(r,n,o,s,l){var u=o?n:filterByKeys(objectKeys(r.params),n),f={$stateParams:u};l.resolve=i.resolve(r.resolve,f,l.resolve,r);var c=[l.resolve.then(function(r){l.globals=r})];return s&&c.push(s),forEach(r.views,function(e,n){var o=e.resolve&&e.resolve!==r.resolve?e.resolve:{};o.$template=[function(){return t.load(n,{view:e,locals:f,params:u})||""}],c.push(i.resolve(o,f,l.resolve,r).then(function(t){if(isFunction(e.controllerProvider)||isArray(e.controllerProvider)){var i=angular.extend({},o,f);t.$$controller=a.invoke(e.controllerProvider,null,i)}else t.$$controller=e.controller;t.$$state=r,t.$$controllerAs=e.controllerAs,l[n]=t}))}),e.all(c).then(function(){return l})}var $=e.reject(new Error("transition superseded")),g=e.reject(new Error("transition prevented")),w=e.reject(new Error("transition aborted")),b=e.reject(new Error("transition failed"));return v.locals={resolve:null,globals:{$stateParams:{}}},d={params:{},current:v.self,$current:v,transition:null},d.reload=function(){d.transitionTo(d.current,l,{reload:!0,inherit:!1,notify:!1})},d.go=function(r,e,t){return d.transitionTo(r,e,extend({inherit:!0,relative:d.$current},t))},d.transitionTo=function(t,i,o){i=i||{},o=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var s,p=d.$current,w=d.params,b=p.path,y=n(t,o.relative);if(!isDefined(y)){var P={to:t,toParams:i,options:o},E=f(P,p.self,w,o);if(E)return E;if(t=P.to,i=P.toParams,o=P.options,y=n(t,o.relative),!isDefined(y)){if(!o.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+o.relative+"'")}}if(y[m])throw new Error("Cannot transition to abstract state '"+t+"'");o.inherit&&(i=inheritParams(l,i||{},d.$current,y)),t=y;var x=t.path,S=0,j=x[S],O=v.locals,K=[];if(!o.reload)for(;j&&j===b[S]&&equalForKeys(i,w,j.ownParams);)O=K[S]=j.locals,S++,j=x[S];if(c(t,p,O,o))return t.self.reloadOnSearch!==!1&&u.update(),d.transition=null,e.when(d.current);if(i=filterByKeys(objectKeys(t.params),i||{}),o.notify&&r.$broadcast("$stateChangeStart",t.self,i,p.self,w).defaultPrevented)return u.update(),g;for(var D=e.when(O),F=S;F<x.length;F++,j=x[F])O=K[F]=inherit(O),D=h(j,i,j===t,D,O);var q=d.transition=D.then(function(){var e,n,s;if(d.transition!==q)return $;for(e=b.length-1;e>=S;e--)s=b[e],s.self.onExit&&a.invoke(s.self.onExit,s.self,s.locals.globals),s.locals=null;for(e=S;e<x.length;e++)n=x[e],n.locals=K[e],n.self.onEnter&&a.invoke(n.self.onEnter,n.self,n.locals.globals);return d.transition!==q?$:(d.$current=t,d.current=t.self,d.params=i,copy(d.params,l),d.transition=null,o.location&&t.navigable&&u.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{replace:"replace"===o.location}),o.notify&&r.$broadcast("$stateChangeSuccess",t.self,i,p.self,w),u.update(!0),d.current)},function(n){return d.transition!==q?$:(d.transition=null,s=r.$broadcast("$stateChangeError",t.self,i,p.self,w,n),s.defaultPrevented||u.update(),e.reject(n))});return q},d.is=function(r,e){var t=n(r);return isDefined(t)?d.$current!==t?!1:isDefined(e)&&null!==e?angular.equals(l,e):!0:void 0},d.includes=function(r,e){if(isString(r)&&o(r)){if(!s(r))return!1;r=d.$current.name}var t=n(r);return isDefined(t)?isDefined(d.$current.includes[t.name])?equalForKeys(e,l):!1:void 0},d.href=function(r,e,t){t=extend({lossy:!0,inherit:!0,absolute:!1,relative:d.$current},t||{});var a=n(r,t.relative);if(!isDefined(a))return null;t.inherit&&(e=inheritParams(l,e||{},d.$current,a));var i=a&&t.lossy?a.navigable:a;return i&&i.url?u.href(i.url,filterByKeys(objectKeys(a.params),e||{}),{absolute:t.absolute}):null},d.get=function(r,e){if(0===arguments.length)return objectKeys(p).map(function(r){return p[r].self});var t=n(r,e);return t&&t.self?t.self:null},d}function c(r,e,t,n){return r!==e||(t!==e.locals||n.reload)&&r.self.reloadOnSearch!==!1?void 0:!0}var v,d,p={},h={},m="abstract",$={parent:function(r){if(isDefined(r.parent)&&r.parent)return n(r.parent);var e=/^(.+)\.[^.]+$/.exec(r.name);return e?n(e[1]):v},data:function(r){return r.parent&&r.parent.data&&(r.data=r.self.data=extend({},r.parent.data,r.data)),r.data},url:function(r){var t=r.url,n={params:r.params||{}};if(isString(t))return"^"==t.charAt(0)?e.compile(t.substring(1),n):(r.parent.navigable||v).url.concat(t,n);if(!t||e.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+r+"'")},navigable:function(r){return r.url?r:r.parent?r.parent.navigable:null},params:function(r){return r.params?r.params:r.url?r.url.params:r.parent.params},views:function(r){var e={};return forEach(isDefined(r.views)?r.views:{"":r},function(t,n){n.indexOf("@")<0&&(n+="@"+r.parent.name),e[n]=t}),e},ownParams:function(r){if(r.params=r.params||{},!r.parent)return objectKeys(r.params);var e={};forEach(r.params,function(r,t){e[t]=!0}),forEach(r.parent.params,function(t,n){if(!e[n])throw new Error("Missing required parameter '"+n+"' in state '"+r.name+"'");e[n]=!1});var t=[];return forEach(e,function(r,e){r&&t.push(e)}),t},path:function(r){return r.parent?r.parent.path.concat(r):[]},includes:function(r){var e=r.parent?extend({},r.parent.includes):{};return e[r.name]=!0,e},$delegates:{}};v=i({name:"",url:"^",views:null,"abstract":!0}),v.navigable=null,this.decorator=l,this.state=u,this.$get=f,f.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter"]}$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider);