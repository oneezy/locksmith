function $UrlRouterProvider(r,e){function n(r){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(r.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function t(r,e){return r.replace(/\$(\$|\d{1,2})/,function(r,n){return e["$"===n?0:Number(n)]})}function i(r,e,n){if(!n)return!1;var t=r.invoke(e,e,{$match:n});return isDefined(t)?t:!0}function o(e,n,t,i){function o(r,e,n){return"/"===h?r:e?h.slice(0,-1)+r:n?h.slice(1)+r:r}function l(r){function n(r){var n=r(t,e);return n?(isString(n)&&e.replace().url(n),!0):!1}if(!r||!r.defaultPrevented){var i,o=c.length;for(i=0;o>i;i++)if(n(c[i]))return;a&&n(a)}}function s(){return u=u||n.$on("$locationChangeSuccess",l)}var h=i.baseHref(),v=e.url();return f||s(),{sync:function(){l()},listen:function(){return s()},update:function(r){return r?void(v=e.url()):void(e.url()!==v&&(e.url(v),e.replace()))},push:function(r,n,t){e.url(r.format(n||{})),t&&t.replace&&e.replace()},href:function(n,t,i){if(!n.validates(t))return null;var u=r.html5Mode(),c=n.format(t);if(i=i||{},u||null===c||(c="#"+r.hashPrefix()+c),c=o(c,u,i.absolute),!i.absolute||!c)return c;var a=!u&&c?"/":"",f=e.port();return f=80===f||443===f?"":":"+f,[e.protocol(),"://",e.host(),f,a,c].join("")}}}var u,c=[],a=null,f=!1;this.rule=function(r){if(!isFunction(r))throw new Error("'rule' must be a function");return c.push(r),this},this.otherwise=function(r){if(isString(r)){var e=r;r=function(){return e}}else if(!isFunction(r))throw new Error("'rule' must be a function");return a=r,this},this.when=function(r,o){var u,c=isString(o);if(isString(r)&&(r=e.compile(r)),!c&&!isFunction(o)&&!isArray(o))throw new Error("invalid 'handler' in when()");var a={matcher:function(r,n){return c&&(u=e.compile(n),n=["$match",function(r){return u.format(r)}]),extend(function(e,t){return i(e,n,r.exec(t.path(),t.search()))},{prefix:isString(r.prefix)?r.prefix:""})},regex:function(r,e){if(r.global||r.sticky)throw new Error("when() RegExp must not be global or sticky");return c&&(u=e,e=["$match",function(r){return t(u,r)}]),extend(function(n,t){return i(n,e,r.exec(t.path()))},{prefix:n(r)})}},f={matcher:e.isMatcher(r),regex:r instanceof RegExp};for(var l in f)if(f[l])return this.rule(a[l](r,o));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(r){void 0===r&&(r=!0),f=r},this.$get=o,o.$inject=["$location","$rootScope","$injector","$browser"]}$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider);